{"version":3,"sources":["all.js"],"names":["route","token","newData","cartNewData","allProduct_ul","document","querySelector","allProductType_btn","cartList_ul","clearAllCart_btn","deleteProduct_btn","orderSubmit_form","axios","get","then","res","data","allProductRender","err","console","log","cartListRender","allProductStr","map","item","innerHTML","length","cartListStr","addToCart","e","post","productId","target","getAttribute","quantity","clearAllCart","alert","window","location","reload","orderSubmit","forms","user","name","value","tel","email","address","payment","i","response","message","addEventListener","type","forEach","index","splice","preventDefault"],"mappings":"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","file":"all.js","sourcesContent":["// ! API-route\nconst route = `rocket-frank`;\n// ! API-token\nconst token = `xWFBP5xYVHNDhUnNY6F5oYdQSIB3`;\n\n// ! 全部產品渲染用資料集\nlet newData = [];\n// ! 購物車清單渲染用資料集\nlet cartNewData = [];\n\n// DOM => 全部產品列表的ul\nconst allProduct_ul = document.querySelector(`#allProduct`);\n// DOM => 全部產品列表的選單按鈕\nconst allProductType_btn = document.querySelector(\"#allProductType\");\n// DOM => 購物車列表的ul\nconst cartList_ul = document.querySelector(`#cartList`);\n// DOM => 清空購物車的btn\nconst clearAllCart_btn = document.querySelector(`#clearAllCart_btn`);\n// DOM => 刪除購物車商品的btn\nconst deleteProduct_btn = document.querySelector(`#deleteProductBtn`);\n// DOM => 送出訂單的form\nconst orderSubmit_form = document.querySelector(`#orderSubmit`);\n\n// * 撈取所有產品資料\naxios\n  .get(\n    `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/products`\n  )\n  .then((res) => {\n    newData = res.data;\n    allProductRender();\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n\n// * 撈取購物車列表資料\naxios\n  .get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/carts`)\n  .then((res) => {\n    cartNewData = res.data;\n    cartListRender();\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n\n// 函式 => 初始化渲染全部產品\nfunction allProductRender() {\n  let allProductStr = ``;\n  newData[\"products\"].map((item) => {\n    allProductStr += `<li class=\"flex items-center\">\n    <p class=\"min-w-[300px]\">${item[\"title\"]}</p>\n    <input\n    data-id=${item[\"id\"]}\n    class=\"btn btn-hover addToCartBtn\"\n    type=\"button\"\n    value=\"加入購物車\"\n  />`;\n    allProduct_ul.innerHTML = allProductStr;\n  });\n}\n\n// 函式 => 初始化渲染購物車列表\nfunction cartListRender() {\n  if (cartNewData[\"carts\"].length === 0) {\n    let cartListStr = `<li class=\"text-xl font-bold\">購物車沒有商品</li>`;\n    cartList_ul.innerHTML = cartListStr;\n  } else {\n    let cartListStr = ``;\n    cartNewData[\"carts\"].map((item) => {\n      cartListStr += `<li class=\"flex items-center\"><p class=\"min-w-[300px]\">${item[\"product\"][\"title\"]}</p><input id=\"deleteProductBtn\" cart-id=${item[\"id\"]} class=\"btn btn-hover\" type=\"button\" value=\"刪除商品\" /></li>`;\n      cartList_ul.innerHTML = cartListStr;\n    });\n  }\n}\n\n// 函式 => 加入購物車\nfunction addToCart(e) {\n  // * 撈取購物車列表資料\n  axios\n    .post(\n      `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/carts\n`,\n      {\n        data: {\n          productId: `${e.target.getAttribute(\"data-id\")}`,\n          quantity: 5,\n        },\n      }\n    )\n    .then((res) => {\n      // * 撈取購物車列表資料\n      axios\n        .get(\n          `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/carts`\n        )\n        .then((res) => {\n          cartNewData = res.data;\n          cartListRender();\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n      cartListRender();\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\n\n//函式 => 清空購物車\nfunction clearAllCart() {\n  cartNewData[\"carts\"] = [];\n  alert(\"購物車已清空\");\n  cartListRender();\n  axios\n    .delete(\n      `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/carts\n  `\n    )\n    .then((res) => {\n      console.log(res.data);\n    })\n    .catch((err) => {\n      console.log(err);\n      alert(\"購物車清空失敗\");\n      window.location.reload();\n    });\n}\n\n//函式 => 送出訂單\nfunction orderSubmit(forms) {\n\n  axios\n    .post(\n      `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/orders`,\n      {\n        data: {\n          user: {\n            name: forms[0].value,\n            tel: forms[1].value,\n            email: forms[2].value,\n            address: forms[3].value,\n            payment: forms[4].value,\n          },\n        },\n      }\n    )\n    .then((res) => {\n      for (let i = 0; i < 4; i++) {\n        forms[i].value = ``;\n        forms[4].value = `none`;\n      }\n      cartNewData['carts'] = []\n      cartListRender();\n      alert(\"訂單建立成功\");\n    })\n    .catch((err) => {\n      alert(err.response.data.message);\n    });\n}\n\n// 監聽 => 全部產品類別選擇\nallProductType_btn.addEventListener(\"change\", (e) => {\n  // console.log(e.target.value);\n  let allProductStr = ``;\n  newData[\"products\"].map((item) => {\n    if (e.target.value === item[\"category\"]) {\n      allProductStr += `<li class=\"flex items-center\">\n      <p class=\"min-w-[300px]\">${item[\"title\"]}</p>\n      <input\n      id=${item[\"id\"]}\n      class=\"btn btn-hover addToCartBtn\"\n      type=\"button\"\n      value=\"加入購物車\"\n    />`;\n      allProduct_ul.innerHTML = allProductStr;\n    } else if (e.target.value === \"全部\") {\n      allProductRender();\n    }\n  });\n});\n// 監聽 => 加入購物車按鈕\nallProduct_ul.addEventListener(\"click\", (e) => {\n  if (e.target.type === \"button\") {\n    alert(\"此商品已加入購物車\");\n    addToCart(e);\n  } else {\n    return;\n  }\n});\n// 監聽 => 清空購物車按鈕\nclearAllCart_btn.addEventListener(\"click\", (e) => {\n  // alert(\"購物車已清空\");\n  clearAllCart();\n});\n// 監聽 => 刪除購物車商品按鈕\ncartList_ul.addEventListener(\"click\", (e) => {\n  if (e.target.type === \"button\") {\n    cartNewData[\"carts\"].forEach((item, index) => {\n      if (e.target.getAttribute(\"cart-id\") === item[\"id\"]) {\n        cartNewData[\"carts\"].splice(index, 1);\n        alert(\"此商品已刪除\");\n        cartListRender();\n      }\n    });\n    axios\n      .delete(\n        `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/carts/${e.target.getAttribute(\n          \"cart-id\"\n        )}`\n      )\n      .then((res) => {\n        console.log(res.data);\n      })\n      .catch((err) => {\n        console.log(err);\n        alert(\"商品刪除失敗\");\n        window.location.reload();\n      });\n  } else {\n    return;\n  }\n});\n// 監聽 => 送出訂單的各項資料\norderSubmit_form.addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  let forms = document.forms[0];\n  if (e.target.value === \"送出訂單\") {\n    for (let i = 0; i < forms.length; i++) {\n      if (forms[i].value === `` || forms[4].value === \"none\") {\n        alert(\"請填寫每筆資料\");\n        return;\n      }\n    }\n    orderSubmit(forms);\n  }\n});\n"]}