{"version":3,"sources":["all.js"],"names":["route","token","allProduct_ul","document","querySelector","allProductType_btn","cartList_ul","clearAllCart_btn","deleteProduct_btn","orderSubmit_form","allProductRender","cartListRender","axios","get","then","res","allProductStr","data","map","item","innerHTML","err","console","log","length","cartListStr","addToCart","e","post","productId","target","getAttribute","quantity","alert","clearAllCart","orderSubmit","forms","user","name","value","tel","email","address","payment","i","response","message","addEventListener","type","preventDefault"],"mappings":"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","file":"all.js","sourcesContent":["// ! API-route\nconst route = `rocket-frank`;\n// ! API-token\nconst token = `xWFBP5xYVHNDhUnNY6F5oYdQSIB3`;\n\n// DOM => 全部產品列表的ul\nconst allProduct_ul = document.querySelector(`#allProduct`);\n// DOM => 全部產品列表的選單按鈕\nconst allProductType_btn = document.querySelector(\"#allProductType\");\n// DOM => 購物車列表的ul\nconst cartList_ul = document.querySelector(`#cartList`);\n// DOM => 清空購物車的btn\nconst clearAllCart_btn = document.querySelector(`#clearAllCart_btn`);\n// DOM => 刪除購物車商品的btn\nconst deleteProduct_btn = document.querySelector(`#deleteProductBtn`);\n// DOM => 送出訂單的form\nconst orderSubmit_form = document.querySelector(`#orderSubmit`);\n\nallProductRender();\ncartListRender();\n\n// 函式 => 初始化渲染全部產品\nfunction allProductRender() {\n  // * 撈取所有產品資料\n  axios\n    .get(\n      `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/products`\n    )\n    .then((res) => {\n      let allProductStr = ``;\n      res.data[\"products\"].map((item) => {\n        allProductStr += `<li class=\"flex items-center\">\n        <p class=\"min-w-[300px]\">${item[\"title\"]}</p>\n        <input\n        data-id=${item[\"id\"]}\n        class=\"btn btn-hover addToCartBtn\"\n        type=\"button\"\n        value=\"加入購物車\"\n      />`;\n        allProduct_ul.innerHTML = allProductStr;\n      });\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\n\n// 函式 => 初始化渲染購物車列表\nfunction cartListRender() {\n  // * 撈取購物車列表資料\n  axios\n    .get(\n      `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/carts`\n    )\n    .then((res) => {\n      if (res.data[\"carts\"].length === 0) {\n        let cartListStr = `<li class=\"text-xl font-bold\">購物車沒有商品</li>`;\n        cartList_ul.innerHTML = cartListStr;\n      } else {\n        let cartListStr = ``;\n        res.data[\"carts\"].map((item) => {\n          cartListStr += `<li class=\"flex items-center\"><p class=\"min-w-[300px]\">${item[\"product\"][\"title\"]}</p><input id=\"deleteProductBtn\" cart-id=${item[\"id\"]} class=\"btn btn-hover\" type=\"button\" value=\"刪除商品\" /></li>`;\n          cartList_ul.innerHTML = cartListStr;\n        });\n      }\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\n\n// 函式 => 加入購物車\nfunction addToCart(e) {\n  // * 撈取購物車列表資料\n  axios\n    .post(\n      `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/carts\n`,\n      {\n        data: {\n          productId: `${e.target.getAttribute(\"data-id\")}`,\n          quantity: 5,\n        },\n      }\n    )\n    .then((res) => {\n      alert(\"此商品已加入購物車\");\n      cartListRender();\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\n\n//函式 => 清空購物車\nfunction clearAllCart() {\n  axios\n    .delete(\n      `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/carts\n  `\n    )\n    .then((res) => {\n      cartListRender();\n      alert(\"購物車已清空\");\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\n\n//函式 => 送出訂單\nfunction orderSubmit(forms) {\n  axios\n    .post(\n      `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/orders`,\n      {\n        data: {\n          user: {\n            name: forms[0].value,\n            tel: forms[1].value,\n            email: forms[2].value,\n            address: forms[3].value,\n            payment: forms[4].value,\n          },\n        },\n      }\n    )\n    .then((res) => {\n      for (let i = 0; i < 4; i++) {\n        forms[i].value = ``;\n        forms[4].value = `none`;\n      }\n      cartListRender();\n      alert(\"訂單建立成功\");\n    })\n    .catch((err) => {\n      alert(err.response.data.message);\n    });\n}\n\n// 監聽 => 全部產品類別選擇\nallProductType_btn.addEventListener(\"change\", (e) => {\n  // console.log(e.target.value);\n  axios\n    .get(\n      `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/products`\n    )\n    .then((res) => {\n      let allProductStr = ``;\n      res.data[\"products\"].map((item) => {\n        console.log(item[\"category\"]);\n        if (e.target.value === item[\"category\"]) {\n          allProductStr += `<li class=\"flex items-center\">\n          <p class=\"min-w-[300px]\">${item[\"title\"]}</p>\n          <input\n          id=${item[\"id\"]}\n          class=\"btn btn-hover addToCartBtn\"\n          type=\"button\"\n          value=\"加入購物車\"\n        />`;\n          allProduct_ul.innerHTML = allProductStr;\n        } else if (e.target.value === \"全部\") {\n          allProductRender();\n        }\n      });\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n});\n// 監聽 => 加入購物車按鈕\nallProduct_ul.addEventListener(\"click\", (e) => {\n  if (e.target.type === \"button\") {\n    addToCart(e);\n  } else {\n    return;\n  }\n});\n// 監聽 => 清空購物車按鈕\nclearAllCart_btn.addEventListener(\"click\", (e) => {\n  clearAllCart();\n});\n// 監聽 => 刪除購物車商品按鈕\ncartList_ul.addEventListener(\"click\", (e) => {\n  if (e.target.type === \"button\") {\n    axios\n      .delete(\n        `https://livejs-api.hexschool.io/api/livejs/v1/customer/${route}/carts/${e.target.getAttribute(\n          \"cart-id\"\n        )}`\n      )\n      .then((res) => {\n        console.log(res.data);\n        cartListRender();\n        alert(\"此商品已刪除\");\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  } else {\n    return;\n  }\n});\n// 監聽 => 送出訂單的各項資料\norderSubmit_form.addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  let forms = document.forms[0];\n  if (e.target.value === \"送出訂單\") {\n    for (let i = 0; i < forms.length; i++) {\n      if (forms[i].value === `` || forms[4].value === \"none\") {\n        alert(\"請填寫每筆資料\");\n        return;\n      }\n    }\n    orderSubmit(forms);\n  }\n});\n"]}